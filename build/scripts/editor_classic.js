cwpc_localized=cwpc_localized||{value:null,can_edit:!1};const CWPC_Classic={slug:"cwpc",metaKey:"_cwpc",categoryMetaBox:null,active_css_class:"cwpc_active",can_edit:cwpc_localized.can_edit,init:function(){CWPC_Classic.categoryMetaBox=document.querySelector("#categorydiv.postbox"),CWPC_Classic.categoryMetaBox&&(CWPC_Classic.registerCTAs(),CWPC_Classic.categoryMetaBox.appendChild(CWPC_Classic.createFormField()),CWPC_Classic.readFromLocalized())},readFromLocalized:function(){cwpc_localized&&cwpc_localized.value&&(CWPC_Classic.can_edit=cwpc_localized.can_edit&&"1"===cwpc_localized.can_edit,CWPC_Classic.toggle(cwpc_localized.value))},deselect_all_active:function(){Array.from(document.getElementsByClassName(CWPC_Classic.active_css_class)).forEach(e=>{e.classList.remove(CWPC_Classic.active_css_class)})},toggle:function(e,c=null){if(c=c||document.querySelector(`li#category-${e} label`),e=CWPC_Classic.value===e?"":e,CWPC_Classic.value=e,document.getElementById(CWPC_Classic.slug).setAttribute("value",e),CWPC_Classic.deselect_all_active(),c){const s=c.querySelector(`.${CWPC_Classic.slug}`);e?(c.classList.add(CWPC_Classic.active_css_class),CWPC_Classic.can_edit&&(s.innerHTML="<span>Remove Primary</span>",c.querySelector("input[type=checkbox]").setAttribute("checked",!0))):(s.innerHTML='<span class="dashicons dashicons-star-empty" title="Set as Primary"></span>',c.classList.remove(CWPC_Classic.active_css_class))}},createFormField:function(){const e=document.createElement("input");return e.setAttribute("type","hidden"),e.setAttribute("id",CWPC_Classic.slug),e.setAttribute("name",CWPC_Classic.metaKey),e},registerCTAs:function(){const e=CWPC_Classic.categoryMetaBox.querySelectorAll(".categorychecklist li");e.forEach(e=>{const c=e.querySelector("label"),s=e.querySelector("input");if(s&&c){const a=document.createElement("span");a.classList.add(CWPC_Classic.slug),CWPC_Classic.can_edit&&(a.innerHTML='<span class="dashicons dashicons-star-empty" title="Set as Primary"></span>',a.onclick=function(){CWPC_Classic.toggle(s.value,c),event.preventDefault(),event.stopPropagation()},s.addEventListener("change",function(){this.checked||CWPC_Classic.value!==this.value||CWPC_Classic.toggle(s.value,c)})),c.appendChild(a)}})}};document.addEventListener("DOMContentLoaded",()=>{CWPC_Classic.init()});